<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Downloading data from NSRR • nsrr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Downloading data from NSRR">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">nsrr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/downloading_data_nsrr.html">Downloading data from NSRR</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/muschellij2/nsrr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><script src="downloading_data_nsrr_files/htmlwidgets-1.3/htmlwidgets.js"></script><script src="downloading_data_nsrr_files/jquery-1.12.4/jquery.min.js"></script><link href="downloading_data_nsrr_files/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="downloading_data_nsrr_files/datatables-binding-0.5/datatables.js"></script><link href="downloading_data_nsrr_files/dt-core-1.10.16/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="downloading_data_nsrr_files/dt-core-1.10.16/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="downloading_data_nsrr_files/dt-core-1.10.16/js/jquery.dataTables.min.js"></script><link href="downloading_data_nsrr_files/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet">
<script src="downloading_data_nsrr_files/crosstalk-1.0.0/js/crosstalk.min.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Downloading data from NSRR</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/muschellij2/nsrr/blob/master/vignettes/downloading_data_nsrr.Rmd"><code>vignettes/downloading_data_nsrr.Rmd</code></a></small>
      <div class="hidden name"><code>downloading_data_nsrr.Rmd</code></div>

    </div>

    
    
<div id="token" class="section level2">
<h2 class="hasAnchor">
<a href="#token" class="anchor"></a>Token</h2>
<p>To retrieve your NSRR token, go to <a href="https://sleepdata.org/dashboard" class="uri">https://sleepdata.org/dashboard</a>, and sign in. This token will allow you access to any data sets you have requested access to. If you do not have access, then it will allow you to download files that are publicly available.</p>
<p>Set the token by adding this to your <code>~/.Renviron</code> file:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1">NSRR_TOKEN=<span class="st">"YOUR TOKEN GOES HERE"</span></a></code></pre></div>
<p>The token is accessible via <code>token = Sys.getenv("NSRR_TOKEN")</code>. Each <code>nsrr</code> function also has the argument <code>token</code> to pass through if you do not wish to set it.</p>
<p>To determine if you are authenticated, you can use:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(nsrr)</a>
<a class="sourceLine" id="cb2-2" title="2"><span class="kw"><a href="../reference/nsrr_token.html">nsrr_auth</a></span>()</a>
<a class="sourceLine" id="cb2-3" title="3"><span class="co">#&gt; $authenticated</span></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="co">#&gt; [1] TRUE</span></a>
<a class="sourceLine" id="cb2-5" title="5"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb2-6" title="6"><span class="co">#&gt; $username</span></a>
<a class="sourceLine" id="cb2-7" title="7"><span class="co">#&gt; [1] "muschellij2"</span></a>
<a class="sourceLine" id="cb2-8" title="8"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb2-9" title="9"><span class="co">#&gt; $full_name</span></a>
<a class="sourceLine" id="cb2-10" title="10"><span class="co">#&gt; [1] ""</span></a>
<a class="sourceLine" id="cb2-11" title="11"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb2-12" title="12"><span class="co">#&gt; $first_name</span></a>
<a class="sourceLine" id="cb2-13" title="13"><span class="co">#&gt; NULL</span></a>
<a class="sourceLine" id="cb2-14" title="14"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb2-15" title="15"><span class="co">#&gt; $last_name</span></a>
<a class="sourceLine" id="cb2-16" title="16"><span class="co">#&gt; NULL</span></a>
<a class="sourceLine" id="cb2-17" title="17"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb2-18" title="18"><span class="co">#&gt; $email</span></a>
<a class="sourceLine" id="cb2-19" title="19"><span class="co">#&gt; [1] "muschellij2@gmail.com"</span></a></code></pre></div>
</div>
<div id="examples" class="section level2">
<h2 class="hasAnchor">
<a href="#examples" class="anchor"></a>Examples</h2>
<div id="nsrr-data-sets" class="section level3">
<h3 class="hasAnchor">
<a href="#nsrr-data-sets" class="anchor"></a>NSRR data sets</h3>
<p>Here is how you can access the NSRR datasets list:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(nsrr)</a>
<a class="sourceLine" id="cb3-2" title="2">df =<span class="st"> </span><span class="kw"><a href="../reference/nsrr_datasets.html">nsrr_datasets</a></span>()</a>
<a class="sourceLine" id="cb3-3" title="3">DT<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/DT/topics/datatable">datatable</a></span>(df)</a></code></pre></div>
<div id="htmlwidget-33427c17be9c21e9f3e4" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-33427c17be9c21e9f3e4">{"x":{"filter":"none","data":[["1","2","3","4","5","6","7","8","9","10"],["Apnea, Bariatric surgery, and CPAP study","Best Apnea Interventions in Research","Childhood Adenotonsillectomy Trial","Cleveland Children's Sleep and Health Study","Cleveland Family Study","Heart Biomarker Evaluation in Apnea Treatment","Hispanic Community Health Study / Study of Latinos","Home Positive Airway Pressure","Honolulu-Asia Aging Study of Sleep Apnea","Learn"],["abc","bestair","chat","ccshs","cfs","heartbeat","hchs","homepap","haassa","learn"],["2014-07-11T16:32:56.676-04:00","2013-10-31T11:46:58.631-04:00","2013-10-31T11:46:21.675-04:00","2015-09-02T12:16:35.426-04:00","2014-06-24T14:36:20.767-04:00","2014-03-06T14:17:57.925-05:00","2014-07-11T17:02:18.887-04:00","2014-07-11T17:18:14.133-04:00","2014-07-11T16:48:04.444-04:00","2017-01-26T16:05:10.972-05:00"],["2018-10-16T10:34:25.135-04:00","2019-01-07T08:38:45.951-05:00","2018-10-16T10:29:52.632-04:00","2018-10-16T10:31:44.165-04:00","2018-10-16T10:31:24.294-04:00","2018-10-16T10:30:22.711-04:00","2019-02-20T12:15:26.986-05:00","2019-05-14T13:30:05.116-04:00","2018-10-16T10:32:29.951-04:00","2019-03-27T07:23:48.102-04:00"],["/datasets/abc.json","/datasets/bestair.json","/datasets/chat.json","/datasets/ccshs.json","/datasets/cfs.json","/datasets/heartbeat.json","/datasets/hchs.json","/datasets/homepap.json","/datasets/haassa.json","/datasets/learn.json"],["/datasets/abc/files.json","/datasets/bestair/files.json","/datasets/chat/files.json","/datasets/ccshs/files.json","/datasets/cfs/files.json","/datasets/heartbeat/files.json","/datasets/hchs/files.json","/datasets/homepap/files.json","/datasets/haassa/files.json","/datasets/learn/files.json"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>name<\/th>\n      <th>slug<\/th>\n      <th>created_at<\/th>\n      <th>updated_at<\/th>\n      <th>path<\/th>\n      <th>files<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"order":[],"autoWidth":false,"orderClasses":false,"columnDefs":[{"orderable":false,"targets":0}]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="nsrr-data-set-files" class="section level3">
<h3 class="hasAnchor">
<a href="#nsrr-data-set-files" class="anchor"></a>NSRR data set files</h3>
<p>Here we first get a list of the files in the <code>datasets</code> sub-directory from the <code>shhs</code> data set:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1">df =<span class="st"> </span><span class="kw"><a href="../reference/nsrr_datasets.html">nsrr_dataset_files</a></span>(<span class="st">"shhs"</span>, <span class="dt">path =</span> <span class="st">"datasets"</span>)</a>
<a class="sourceLine" id="cb4-2" title="2"><span class="co">#&gt; Warning in nsrr_dataset_files("shhs", path = "datasets"): Dataset not in</span></a>
<a class="sourceLine" id="cb4-3" title="3"><span class="co">#&gt; set from NSRR</span></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(df)</a>
<a class="sourceLine" id="cb4-5" title="5"><span class="co">#&gt;   dataset                         full_path    folder</span></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="co">#&gt; 1    shhs                  datasets/archive datasets/</span></a>
<a class="sourceLine" id="cb4-7" title="7"><span class="co">#&gt; 2    shhs    datasets/eeg-spectral-analysis datasets/</span></a>
<a class="sourceLine" id="cb4-8" title="8"><span class="co">#&gt; 3    shhs             datasets/hrv-analysis datasets/</span></a>
<a class="sourceLine" id="cb4-9" title="9"><span class="co">#&gt; 4    shhs             datasets/CHANGELOG.md datasets/</span></a>
<a class="sourceLine" id="cb4-10" title="10"><span class="co">#&gt; 5    shhs           datasets/KNOWNISSUES.md datasets/</span></a>
<a class="sourceLine" id="cb4-11" title="11"><span class="co">#&gt; 6    shhs datasets/shhs1-dataset-0.13.0.csv datasets/</span></a>
<a class="sourceLine" id="cb4-12" title="12"><span class="co">#&gt;                  file_name is_file file_size</span></a>
<a class="sourceLine" id="cb4-13" title="13"><span class="co">#&gt; 1                  archive   FALSE         0</span></a>
<a class="sourceLine" id="cb4-14" title="14"><span class="co">#&gt; 2    eeg-spectral-analysis   FALSE         0</span></a>
<a class="sourceLine" id="cb4-15" title="15"><span class="co">#&gt; 3             hrv-analysis   FALSE      4096</span></a>
<a class="sourceLine" id="cb4-16" title="16"><span class="co">#&gt; 4             CHANGELOG.md    TRUE     10439</span></a>
<a class="sourceLine" id="cb4-17" title="17"><span class="co">#&gt; 5           KNOWNISSUES.md    TRUE     11284</span></a>
<a class="sourceLine" id="cb4-18" title="18"><span class="co">#&gt; 6 shhs1-dataset-0.13.0.csv    TRUE  24305606</span></a>
<a class="sourceLine" id="cb4-19" title="19"><span class="co">#&gt;                  file_checksum_md5 archived</span></a>
<a class="sourceLine" id="cb4-20" title="20"><span class="co">#&gt; 1                             &lt;NA&gt;    FALSE</span></a>
<a class="sourceLine" id="cb4-21" title="21"><span class="co">#&gt; 2                             &lt;NA&gt;    FALSE</span></a>
<a class="sourceLine" id="cb4-22" title="22"><span class="co">#&gt; 3                             &lt;NA&gt;    FALSE</span></a>
<a class="sourceLine" id="cb4-23" title="23"><span class="co">#&gt; 4 dab1901d0b625b44622248418ab68068    FALSE</span></a>
<a class="sourceLine" id="cb4-24" title="24"><span class="co">#&gt; 5 c53ea822afa2e78ba601da508562775d    FALSE</span></a>
<a class="sourceLine" id="cb4-25" title="25"><span class="co">#&gt; 6 212cf854c1e04ce6d75cb6580917e3a9    FALSE</span></a></code></pre></div>
</div>
<div id="downloading-nsrr-data-set-files" class="section level3">
<h3 class="hasAnchor">
<a href="#downloading-nsrr-data-set-files" class="anchor"></a>Downloading NSRR data set files</h3>
<p>We can then download the <code>CHANGELOG.md</code> file as it’s publicly accessible.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">url =<span class="st"> </span><span class="kw"><a href="../reference/nsrr_download_url.html">nsrr_download_url</a></span>(<span class="st">"shhs"</span>, <span class="dt">path =</span> <span class="st">"datasets/CHANGELOG.md"</span>, <span class="dt">token =</span> <span class="st">""</span>)</a>
<a class="sourceLine" id="cb5-2" title="2">url <span class="co"># print URL</span></a>
<a class="sourceLine" id="cb5-3" title="3"><span class="co">#&gt; [1] "https://sleepdata.org/datasets/shhs/files/m/nsrr-r-v0-1-2/datasets/CHANGELOG.md"</span></a>
<a class="sourceLine" id="cb5-4" title="4">dl =<span class="st"> </span><span class="kw"><a href="../reference/nsrr_download_url.html">nsrr_download_file</a></span>(<span class="st">"shhs"</span>, <span class="dt">path =</span> <span class="st">"datasets/CHANGELOG.md"</span>, <span class="dt">token =</span> <span class="st">""</span>)</a>
<a class="sourceLine" id="cb5-5" title="5"><span class="co">#&gt; Warning in nsrr_dataset_files(dataset, path = path, token = token): Dataset</span></a>
<a class="sourceLine" id="cb5-6" title="6"><span class="co">#&gt; not in set from NSRR</span></a>
<a class="sourceLine" id="cb5-7" title="7">dl<span class="op">$</span>outfile</a>
<a class="sourceLine" id="cb5-8" title="8"><span class="co">#&gt; [1] "/var/folders/1s/wrtqcpxn685_zk570bnx9_rr0000gr/T//RtmpSWvrJM/file6ac941702f50.md"</span></a>
<a class="sourceLine" id="cb5-9" title="9"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cat">cat</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/readLines">readLines</a></span>(dl<span class="op">$</span>outfile)), <span class="dt">sep =</span> <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</a>
<a class="sourceLine" id="cb5-10" title="10"><span class="co">#&gt; ## 0.13.2 (March 7, 2019)</span></a>
<a class="sourceLine" id="cb5-11" title="11"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-12" title="12"><span class="co">#&gt; - Add labels to demographic variables</span></a>
<a class="sourceLine" id="cb5-13" title="13"><span class="co">#&gt; - Fix display names for fatal CVD and CHD outcome variables</span></a>
<a class="sourceLine" id="cb5-14" title="14"><span class="co">#&gt; - Fix listed calculation in BMI variables (unit mismatch)</span></a></code></pre></div>
</div>
<div id="listing-all-nsrr-data-set-files" class="section level3">
<h3 class="hasAnchor">
<a href="#listing-all-nsrr-data-set-files" class="anchor"></a>Listing All NSRR data set files</h3>
<p>To list all the files, recursively, you would run:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1"><span class="kw"><a href="../reference/nsrr_all_dataset_files.html">nsrr_all_dataset_files</a></span>(<span class="st">"shhs"</span>)</a></code></pre></div>
<p>but it may take some time.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#token">Token</a></li>
      <li><a href="#examples">Examples</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by John Muschelli.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
