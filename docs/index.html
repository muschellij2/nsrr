<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Interface to National Sleep Research Resource • nsrr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Interface to National Sleep Research Resource">
<meta property="og:description" content="Allows users to access data from the National Sleep
    Research Resource (NSRR) &lt;https://sleepdata.org/&gt;.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">nsrr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/dictionary.html">UNKNOWN TITLE</a>
    </li>
    <li>
      <a href="articles/downloading_data_nsrr.html">Downloading data from NSRR</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/muschellij2/nsrr/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="nsrr" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#nsrr" class="anchor"></a>nsrr</h1></div>
<!-- badges: start -->

<p>The goal of nsrr is to allow users to access data from the National Sleep Research Resource (’NSRR’) (<a href="https://sleepdata.org/" class="uri">https://sleepdata.org/</a>) through an <code>R</code> interface.</p>
<p>Why <code>R</code>? Many packages in <code>R</code> can read and process accelerometry, such as the <a href="https://cran.r-project.org/package=GGIR"><code>GGIR</code></a>, <a href="https://cran.r-project.org/package=ActivityIndex"><code>ActivityIndex</code></a>, and <a href="https://cran.r-project.org/package=accelerometry"><code>accelerometry</code></a>; other packages such as <a href="https://cran.r-project.org/package=edfReader"><code>edfReader</code></a> can read in EDF data for polysomnography data. Also, the <a href="https://cran.r-project.org/package=xml2"><code>xml2</code></a> package can easily read in XML annotations into <code>R</code>. We believe the interplay with these packages, amongst others, allow for a flexible framework to download, process, and visualize data. The <code>nsrr</code> package is simply the entry point into navigating the files available and downloading the data.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install the released version of nsrr from <a href="https://CRAN.R-project.org">CRAN</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"nsrr"</span>)</pre></div>
</div>
<div id="token" class="section level2">
<h2 class="hasAnchor">
<a href="#token" class="anchor"></a>Token</h2>
<p>To retrieve your NSRR token, go to <a href="https://sleepdata.org/dashboard" class="uri">https://sleepdata.org/dashboard</a>, and sign in. This token will allow you access to any data sets you have requested access to. If you do not have access, then it will allow you to download files that are publicly available.</p>
<p>Set the token by adding this to your <code>~/.Renviron</code> file:</p>
<div class="sourceCode" id="cb2"><pre class="r"><span class="no">NSRR_TOKEN</span><span class="kw">=</span><span class="st">"YOUR TOKEN GOES HERE"</span></pre></div>
<p>The token is accessible via <code>token = Sys.getenv("NSRR_TOKEN")</code>. Each <code>nsrr</code> function also has the argument <code>token</code> to pass through if you do not wish to set it.</p>
<p>To determine if you are authenticated, you can use:</p>
<div class="sourceCode" id="cb3"><pre class="r">library(nsrr)
nsrr_auth()
$authenticated
[1] TRUE

$username
[1] "muschellij2"

$full_name
[1] ""

$first_name
NULL

$last_name
NULL

$email
[1] "muschellij2@gmail.com"</pre></div>
</div>
<div id="examples" class="section level2">
<h2 class="hasAnchor">
<a href="#examples" class="anchor"></a>Examples</h2>
<div id="nsrr-data-sets" class="section level3">
<h3 class="hasAnchor">
<a href="#nsrr-data-sets" class="anchor"></a>NSRR data sets</h3>
<p>Here is how you can access the NSRR datasets list:</p>
<div class="sourceCode" id="cb4"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">nsrr</span>)
<span class="no">df</span> <span class="kw">=</span> <span class="fu"><a href="reference/nsrr_datasets.html">nsrr_datasets</a></span>()
<span class="kw pkg">DT</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html">datatable</a></span>(<span class="no">df</span>)</pre></div>
<p><img src="reference/figures/README-example-1.png" width="100%"></p>
</div>
<div id="nsrr-data-set-files" class="section level3">
<h3 class="hasAnchor">
<a href="#nsrr-data-set-files" class="anchor"></a>NSRR data set files</h3>
<p>Here we first get a list of the files in the <code>datasets</code> sub-directory from the <code>shhs</code> data set:</p>
<div class="sourceCode" id="cb5"><pre class="r">df = nsrr_dataset_files("shhs", path = "datasets")
head(df)
  dataset                         full_path    folder
1    shhs                  datasets/archive datasets/
2    shhs             datasets/hrv-analysis datasets/
3    shhs             datasets/CHANGELOG.md datasets/
4    shhs           datasets/KNOWNISSUES.md datasets/
5    shhs datasets/shhs1-dataset-0.15.0.csv datasets/
6    shhs datasets/shhs2-dataset-0.15.0.csv datasets/
                 file_name is_file file_size
1                  archive   FALSE         0
2             hrv-analysis   FALSE         0
3             CHANGELOG.md    TRUE     11010
4           KNOWNISSUES.md    TRUE     11421
5 shhs1-dataset-0.15.0.csv    TRUE  24322962
6 shhs2-dataset-0.15.0.csv    TRUE  11897377
                 file_checksum_md5 archived
1                             &lt;NA&gt;    FALSE
2                             &lt;NA&gt;    FALSE
3 69bb54a32cdfc7bdddc13276b7c858c1    FALSE
4 8598129123baa60e16977dc24aa780af    FALSE
5 3f26d37ec97e2bc88776850a31715398    FALSE
6 21807d854010f036fd0d4f006eeed49d    FALSE</pre></div>
</div>
<div id="downloading-nsrr-data-set-files" class="section level3">
<h3 class="hasAnchor">
<a href="#downloading-nsrr-data-set-files" class="anchor"></a>Downloading NSRR data set files</h3>
<p>We can then download the <code>CHANGELOG.md</code> file as it’s publicly accessible.</p>
<div class="sourceCode" id="cb6"><pre class="r">url = nsrr_download_url("shhs", path = "datasets/CHANGELOG.md")
# print URL
dl = nsrr_download_file("shhs", path = "datasets/CHANGELOG.md")
dl$outfile
[1] "/var/folders/1s/wrtqcpxn685_zk570bnx9_rr0000gr/T//RtmpJUlkmk/filea17e12cd407.md"
cat(head(readLines(dl$outfile)), sep = "\n")
## 0.15.0 (November 18, 2019)

- Remove EEG spectral summary variables
- Add notes to height and weight varibles about top and bottom coding
- The CSV datasets generated from a SAS export are located here:
  - `\\rfawin\bwh-sleepepi-shhs\nsrr-prep\_releases\0.15.0\`</pre></div>
</div>
<div id="listing-all-nsrr-data-set-files" class="section level3">
<h3 class="hasAnchor">
<a href="#listing-all-nsrr-data-set-files" class="anchor"></a>Listing All NSRR data set files</h3>
<p>To list all the files, recursively, you would run:</p>
<div class="sourceCode" id="cb7"><pre class="r"><span class="fu"><a href="reference/nsrr_all_dataset_files.html">nsrr_all_dataset_files</a></span>(<span class="st">"shhs"</span>)</pre></div>
<p>but it may take some time.</p>
</div>
<div id="edf-files" class="section level3">
<h3 class="hasAnchor">
<a href="#edf-files" class="anchor"></a>EDF files</h3>
<p>The <a href="https://cran.r-project.org/package=edfReader"><code>edfReader</code></a> can read in EDF fields for polysomnography data. <strong>Work in Progress - need access to EDF data</strong>.</p>
<div class="sourceCode" id="cb8"><pre class="r"><span class="no">files</span> <span class="kw">=</span> <span class="fu"><a href="reference/nsrr_datasets.html">nsrr_dataset_files</a></span>(<span class="st">"shhs"</span>, <span class="kw">path</span><span class="kw">=</span> <span class="st">"polysomnography/edfs/shhs1"</span>)
<span class="no">dl</span> <span class="kw">=</span> <span class="fu"><a href="reference/nsrr_download_url.html">nsrr_download_file</a></span>(<span class="st">"shhs"</span>, <span class="kw">path</span> <span class="kw">=</span> <span class="st">"polysomnography/edfs/shhs1/shhs1-200001.edf"</span>)</pre></div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=nsrr">https://​cloud.r-project.org/​package=nsrr</a>
</li>
<li>Browse source code at <br><a href="https://github.com/muschellij2/nsrr/">https://​github.com/​muschellij2/​nsrr/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/muschellij2/nsrr/issues">https://​github.com/​muschellij2/​nsrr/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>John Muschelli <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-6469-1750" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.com/muschellij2/nsrr"><img src="https://travis-ci.com/muschellij2/nsrr.svg?branch=master" alt="Travis build status"></a></li>
<li><a href="https://ci.appveyor.com/project/muschellij2/nsrr"><img src="https://ci.appveyor.com/api/projects/status/github/muschellij2/nsrr?branch=master&amp;svg=true" alt="AppVeyor Build Status"></a></li>
<li><a href="https://codecov.io/gh/muschellij2/nsrr?branch=master"><img src="https://codecov.io/gh/muschellij2/nsrr/branch/master/graph/badge.svg" alt="Codecov test coverage"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by John Muschelli.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
